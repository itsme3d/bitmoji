function initializeCxense(){cxCandyObj.initialized||(cxdj.initialized=!0,cX.callQueue.push(["invoke",function(){cxdj.run()}]))}var cxCandyObj={version:"2016-09-27",renderTemplateHost:"http://cdn.cxpublic.com/",envType:"",initialized:!1,userId:null,meta:{hasAd:"u"},sites:{"online.wsj.com":"9222318613852486900","www.wsj.com":"9222318613852486900","www.wsjplus.com":"1144060886250044680","live.wsj.com":"9222325317970618875","www.marketwatch.com":"9222325317970825873","marketwatch.com":"9222325317970825873","www.barrons.com":"9222325317970825875","trkcxuevt.wsj.com":"9222334397379502889","cn.wsj.com":"9222335528567651934","www.wsj.com.tr":"9222335528567651935","wsj.com.tr":"9222335528567651935","br.wsj.com":"9222335528567651936","jp.wsj.com":"9222335528673021906","kr.wsj.com":"9222335528673021931","indo.wsj.com":"9222335528673021932","store.wsj.com":"9222368254458574875","onboarding.cxpublic.com":"9222363238898586877","www.local.wsj.com":"9222363238898586877","www.mansionglobal.com":"1144071410389139719","www.realtor.com":"1142953111780883056","heatst.com":"1140711674266969838"},siteLogoInfo:{"9222318613852486900":{name:"Wall Street Journal",imgLink:"http://www.wsj.com/",imgSrc:"https://si.wsj.net/static_html_files/wsj_logo.svg",preferredWidth:"150"},"9222325317970825873":{name:"Market Watch",imgLink:"http://www.marketwatch.com/",imgSrc:"https://si.wsj.net/static_html_files/mw_logo.svg",preferredWidth:"100"},"1144071410389139719":{name:"Mansion Global",imgLink:"http://www.mansionglobal.com/",imgSrc:"https://si.wsj.net/static_html_files/mg_logo.svg",preferredWidth:"140"},"1142953111780883056":{name:"Realtor",imgLink:"http://www.realtor.com/",imgSrc:"https://si.wsj.net/static_html_files/realtor_logo.svg",preferredWidth:"85"}},initialize:function(){cX.addEventListener(window,"message",cxdj.renderCallback),cxdj.meta=cxdj.readPageContext()},isSubscriber:function(a){return"prosubscriber"===a||"procbsubscriber"===a||"subscriber"===a},reportEvent:function(a,b,c){var d=null,e="9222318613852486900";if(a&&a.length&&0===a.indexOf("https://store.wsj.com"))cX.initializePage(),e=cxdj.sites["store.wsj.com"];else{var f=window.location.hostname;f&&cxdj.sites[f]&&(e=cxdj.sites[f])}cX.setSiteId(c||e),cX.setCustomParameters(cxdj.meta),b&&cX.setCustomParameters(b),cxdj.isSubscriber(cxdj.meta.subscriber)&&"y"==cxdj.meta.hasUid&&cX.setUserProfileParameters({knownSubscriber:1}),a&&a.length&&(d={location:a}),cxdj.userId&&cX.addExternalId({id:cxdj.userId,type:"wsj"}),cX.sendPageViewEvent(d)},reportFunnelEvent:function(a){cX.callQueue.push(["invoke",function(){var b="default";a||(a={});var c=cX.library.parseUrlArgs();a.hasAdId=c.cx_adcampaign?"y":"n",a.eventType&&(b=a.eventType,"orderSuccessful"===b&&(a.cxad_trail="conversion",a.cxad_ad_folder=c.cx_adcampaign?c.cx_adcampaign:"000000015f7f038c")),cxdj.reportEvent("https://store.wsj.com/"+b,a)}])},annotateUserProfile:function(a){a||(a="default");var b="http://event.wsj.com?et="+a;cX.setUserProfileParameters({userAction:a}),cX.setSiteId("9222334397379502889"),cX.sendPageViewEvent({location:b})},getDisplayDiv:function(a){if("n"===cxdj.meta.hasAd){var b=$(a);if(1===b.length&&0===b.children().length)return b}return null},showCandyBar:function(){var a="y"===cxdj.meta.isHP?"cx-candybarhp":"cx-candybar",b=cxdj.isSubscriber(cxdj.meta.subscriber)?"wsj-candybar-subscriber.html":"wsj-candybar"+cxdj.envType+".html",c=cxdj.getDisplayDiv("#"+a);c&&(c.css({position:"fixed",bottom:0,left:0,width:0,height:0,"z-index":8e3,display:"none"}),cX.callQueue.push(["insertWidget",{appendToElementId:a,width:0,height:0,renderTemplateUrl:cxdj.renderTemplateHost+b,meta:cX.JSON.stringify(cxdj.meta),env:cxdj.envType}]))},showPopTart:function(){var a=cxdj.getDisplayDiv("#cx-poptart");a&&(a.css({position:"fixed",right:"30px",bottom:"30px","z-index":8e3}),cX.callQueue.push(["insertWidget",{appendToElementId:"cx-poptart",width:0,height:0,renderTemplateUrl:cxdj.renderTemplateHost+"wsj-poptart"+cxdj.envType+".html",meta:cX.JSON.stringify(cxdj.meta),env:cxdj.envType}]),cxdj.poptartPresentation("#cx-poptart",.5))},showScrim:function(){var a="wsj-scrim",b=cxdj.getDisplayDiv("#cx-scrim");if(b){var c="wsjplus.com"==cX.getTopLevelDomain()?"wsjplus-scrim"+cxdj.envType+".html":a+cxdj.envType+".html";b.css({position:"fixed",top:0,left:0,width:0,height:0,display:"none","z-index":8e3}),cX.callQueue.push(["insertWidget",{appendToElementId:"cx-scrim",width:0,height:0,renderTemplateUrl:cxdj.renderTemplateHost+c,meta:cX.JSON.stringify(cxdj.meta),env:cxdj.envType}])}},showSnippet:function(){var a=cxdj.getDisplayDiv("#cx-snippetad");a?(a.html('<div id="cx-snippet-inner"></div>'),cX.callQueue.push(["insertWidget",{appendToElementId:"cx-snippet-inner",width:"100%",height:540,renderTemplateUrl:cxdj.renderTemplateHost+"wsj-snippet"+cxdj.envType+".html",meta:cX.JSON.stringify(cxdj.meta),env:cxdj.envType}])):cX.sendEvent("SnippetTagNotFound")},showArticleCover:function(){var a=cxdj.renderTemplateHost+"wsj-article-cover"+cxdj.envType+".html",b=cxdj.getDisplayDiv("#cx-articlecover");b?(b.css({width:0,height:0,display:"none","z-index":20}),cX.callQueue.push(["insertWidget",{appendToElementId:"cx-articlecover",width:0,height:0,renderTemplateUrl:a,meta:cX.JSON.stringify(cxdj.meta)}])):cX.sendEvent("ArticleCoverTagNotFound")},showInterstitial:function(){var a=cxdj.getDisplayDiv("#cx-interstitial-snippet");a&&(a.html('<div id="cx-interstitial-inner"></div>'),cX.callQueue.push(["insertWidget",{appendToElementId:"cx-interstitial-inner",width:540,height:538,renderTemplateUrl:cxdj.renderTemplateHost+"barrons-interstitial-snippet"+cxdj.envType+".html",meta:cX.JSON.stringify(cxdj.meta),env:cxdj.envType}]))},showEditorsPicks:function(){var a=cxdj.getDisplayDiv("#cx-editor-picks");a&&(a.css({"z-index":8e3}),cX.insertWidget({widgetId:"8458d6491f24990bf92c0479f322eddfc128eb6c",appendToElementId:"cx-editor-picks",width:"100%",height:366,renderTemplateUrl:"auto",meta:cX.JSON.stringify(cxdj.meta),env:cxdj.envType}),$("[data-module-zone='top_stories']").css({display:"none"}),$(".top-stories-strap").css({display:"none"}))},showInPageVideosRHS:function(){function a(a){$(".trending_videos").attr("id","cx-videos");var b=a.response.template,c=$("#cx-videos");b&&c&&c.length&&a.response.items.length>0&&($(".trending_videos").html(""),c.html('<div id="cx-video-target"></div><div id="cx-video-template" class="template" style="display:none">'+b+"</div>"),cX.renderTemplate("cx-video-template","cx-video-target",a)),$("#cx-video-template").remove()}cX.insertWidget({widgetId:"fe8ae4c38a3f6a2dc0a1ebc5a962911eaa45cd8c",renderFunction:a})},showNotifications:function(){var a=cxdj.getDisplayDiv("#cx-notification");a&&(a.css({top:0,left:0,width:0,height:0,display:"none"}),cX.callQueue.push(["insertWidget",{appendToElementId:"cx-notification",width:0,height:0,renderTemplateUrl:cxdj.renderTemplateHost+"wsj-notification"+cxdj.envType+".html",meta:cX.JSON.stringify(cxdj.meta),env:cxdj.envType}]))},registerScrollExpansion:function(a,b,c){var d=!1;$(window).bind("scroll dynamicScroll",function(){var e=$(document).height()-$(window).height(),f=$(window).scrollTop(),g=e*b,h=e*c;f>=g&&f<=h&&!d?(d=!0,$(a+" iframe").height(150)):(f<g||f>h)&&d&&(d=!1,$(a+" iframe").height(149))}).trigger("dynamicScroll")},poptartPresentation:function(a,b){var c=!0;$(a).css({display:"none"}),$(window).bind("scroll dynamicScroll",function(){var d=$(document).height()-$(window).height(),e=$(window).scrollTop(),f=d*b;e>=f&&!c?($(a+" iframe").stop(!0),$(a+" iframe").fadeIn(),$(a).fadeIn(),c=!0):e<f&&c&&($(a+" iframe").stop(!0),$(a+" iframe").fadeOut(),c=!1)}).trigger("dynamicScroll")},scrimPresentation:function(a,b){var c=!1,d="#cx-articlecover"===a;$(a).hide(),$(a+" iframe").hide(),$(window).bind("scroll dynamicScroll",function(){var e=$(document).height()-$(window).height(),f=$(window).scrollTop(),g=e*b,h=d?"9999px":"100%",i=d?"":"100%";f>=g&&!c&&($(a).stop(!0).height("100%").width("100%"),$(a+" iframe").stop(!0).width(i).height(h).show(),$(a).fadeIn(500),c=!0)}).trigger("dynamicScroll")},getRecsWidget:function(){return"Olympics"===cxdj.meta.section||"Olympics"===cxdj.meta.type?{widgetId:"2e6f3a55b420bf4694cfae47c08a6eca4630b885",clickTag:"cx_olympics"}:"Politics"===cxdj.meta.section?{widgetId:"cb71663b8d2e8d1d43f90831c4b933e09279b597",clickTag:"cx_politics"}:{widgetId:"d6491f24990bf92c0479f322eddfc128eb6c",clickTag:"cx_picks"}},renderCallback:function(a){if(a&&a.data&&"string"==typeof a.data&&cX&&cX.decodeUrlEncodedNameValuePairs){var b=cX.decodeUrlEncodedNameValuePairs(a.data),c="#cx-candybar";switch("hp"===b.type?c="#cx-candybarhp":"scrim"===b.type?c="#cx-scrim":"articlecover"===b.type?c="#cx-articlecover":"poptart"==b.type?c="#cx-poptart":"notification"==b.type&&(c="#cx-notification"),b.method){case"cxShowAllOffers":break;case"cxUserAction":cxdj.annotateUserProfile(b.type);break;case"cxCandyResize":("100%"===b.contentHeight||$.isNumeric(b.contentHeight))&&$(c+" iframe").height(b.contentHeight),("100%"===b.contentWidth||$.isNumeric(b.contentWidth))&&$(c+" iframe").width(b.contentWidth);break;case"cxCandyShow":$(c).fadeIn(250),("100%"===b.contentHeight||$.isNumeric(b.contentHeight))&&$(c).height(b.contentHeight),("100%"===b.contentWidth||$.isNumeric(b.contentWidth))&&$(c).width(b.contentWidth);break;case"cxCandyHide":$(c).height(0).width(0).hide(),$(c+" iframe").height(0).width(0).hide();break;case"cxCandyRollUp":$(c).slideUp("slow").animate({top:"-=200"},750,function(){$(c).height(0).width(0).hide(),$(c+" iframe").height(0).width(0).hide()});break;case"cxCandyShowOnScroll":cxdj.scrimPresentation(c,b.scrollDepth||.01)}}},getUserBucket:function(a){var b=["2qgQ1WCa3A","ixi4E5ylqa","830nwKog3K","K8ZnHJ5Uyn","91GjW1q7Zg","rGgki1wrhs","q85AaJVP78","1p6sdUNJWD","63L1D4y2F9","HY0f8Of9M1"],c=cX.getCookie("usr_bkt"),d=b.indexOf(c);if(d!==-1)return d;var e;if(a&&a.length){for(var f=0,g=0;g<a.length;g++)f=(f<<5)-f+a.charCodeAt(g),f|=0;e=Math.abs(f)%10}else e=Math.floor(10*Math.random());return cX.setCookie("usr_bkt",b[e],3650,"/",cX.getTopLevelDomain()),e},readPageContext:function(){var a={};a.hasAd="n",($("#RollOutAd970x66").length>0||$("#AD_PUSH").children().length>0)&&(a.hasAd="y");var b=$('meta[name="cXenseParse:wsj-sponsored"]');b&&b.length&&"true"==b[0].content&&(a.hasAd="y"),$("#cx-candybarhp").length>0?a.isHP="y":a.isHP="n";try{var c=cX.library.parseUrlArgs();c.mod&&(a.navSource=c.mod),c.trackCode&&(a.trackCode=c.trackCode);var d=(document.referrer||"").replace(/^https?:\/\/(www\.)?/,"").split("/")[0].replace(/\./g,"");d.length&&(a.referrer=d);try{var e=window.devicePixelRatio&&window.devicePixelRatio>1||window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)").matches;a.retina=e?"y":"n"}catch(f){a.retina="u"}for(var g=document.getElementsByTagName("meta"),h=0;h<g.length;h++){var i=g[h].content.replace(/ /g,"");switch(g[h].name){case"article.type":a.type=i;break;case"article.template":a.template=i;break;case"article.access":a.access=i;break;case"user.exp":a.userExp=i;break;case"user.type":"nonsubscriber"===i||cxdj.isSubscriber(i)?a.subscriber=i:"freeRegister"===i?a.subscriber="registered":["memsubyes"].indexOf(i)>-1?a.subscriber="subscriber":"regyes"==i?a.subscriber="registered":(a.subscriber="default",a.extra1=i);break;case"section":a.section=i;break;case"article.section":a.section=i}}var j=cX.getCookie("wsjregion")||"na,us",k=j.indexOf("reset");j=k===-1?j:j.slice(0,k-1),a.edition=j.replace(/,/g,"");var l="undefined"==typeof s?{}:s;if(a.subscriber||(a.subscriber="default",l.prop27?"WSJ_sub_yes"===l.prop27||"BOL_sub_yes"===l.prop27?a.subscriber="subscriber":"WSJ_reg_yes"===l.prop27?a.subscriber="registered":"WSJ_free"===l.prop27||"BOL_sub_no"===l.prop27?a.subscriber="nonsubscriber":"D=v26"===l.prop27?l.eVar26?"WSJ_sub_yes"===l.eVar26?a.subscriber="subscriber":"WSJ_mem_yes"===l.eVar26?a.subscriber="subscriber":"WSJ_free"===l.eVar26?a.subscriber="nonsubscriber":a.extra2="v26/"+l.eVar26:a.extra2="v26empty":a.extra2=l.prop27:a.extra2="empty"),"string"==typeof l.eVar3&&l.eVar3.length>5)try{cxdj.userId=""+CryptoJS.MD5(l.eVar3)}catch(f){}a.bucket=cxdj.getUserBucket(cX.getUserId()),a.hasUid=cxdj.userId?"y":"n";var m=cX.getCookie("XP02");if("string"==typeof m&&m.length&&(a.ctp="xp02"+(m.length>16?m.substr(0,16):m)),[null,"-1-v4"].indexOf(m)==-1&&(["e008e61ee27d4e9f297e42b322560c63-v4","f088cb83dde67f9ff61a8a3a09b50427-v4"].indexOf(m)>-1?a.compete="xp02":(a.compete="other",a.extra3=decodeURIComponent(m))),window.JSON){var n=JSON.parse(decodeURIComponent(cX.library.getCookie("cke")||"{}"));"undefined"!=typeof n.A&&(a.ckeA=n.A),"undefined"!=typeof n.B&&(a.ckeB="number"==typeof n.B?n.B.toFixed(3):n.B),"undefined"!=typeof n.C&&(a.ckeC="number"==typeof n.C?n.C.toFixed(3):n.C),"undefined"!=typeof n.D&&(a.ckeD=n.D),"undefined"!=typeof n.F&&(a.ckeF=n.F);var o=$("meta[name=cx_shield]");if(o&&1===o.length){var p=o[0].content;if(p&&p.length){var q=JSON.parse(p);a.pwTag=q.tag,a.pwPlacement=q.placement,a.pwCampaign=q.campaign,a.pwType=q.type,this.cxshield=q}}}}catch(f){}return a},requestAllOffers:function(){var a=parseInt(cxdj.meta.bucket||"0");if(a<5&&cxdj.showInPageVideosRHS(),cxdj.showEditorsPicks(),cxdj.showNotifications(),this.cxshield&&"object"==typeof this.cxshield)switch(this.cxshield.placement){case"cx-candybar":cxdj.showCandyBar();break;case"cx-scrim":cxdj.showScrim();break;case"cx-articlecover":cxdj.showArticleCover();break;case"cx-snippetad":cxdj.showSnippet(),cxdj.showInterstitial()}else"snippet"==cxdj.meta.template?(cxdj.showSnippet(),cxdj.showInterstitial()):(cxdj.showScrim(),cxdj.showCandyBar(),cxdj.showPopTart())},run:function(){cxdj.initialize(),"undefined"==typeof cxDisplayAdOverride&&cxdj.requestAllOffers(),cxdj.reportEvent(null)}},cxad={isRetina:!1,getContent:function(a,b,c){if(a.creative&&a.creative.content&&a.creative.content.length)for(var d=a.creative.content,e=0;e<d.length;e++){var f=d[e];if(f.key===b)return f.value[0]}return c||""},getImage:function(a,b){var c=[""];this.isRetina&&(c=[" retina",""]);for(var d in c){var e=c[d];if(a.creative&&a.creative.images&&a.creative.images.length)for(var f=a.creative.images,g=b.toLowerCase(),h=0;h<f.length;h++){var i=f[h],j=i.key.toLowerCase();if(j===g+e)return i.source}}return""},getAd:function(a){if(a&&a.searchResult&&a.searchResult.spaces&&a.searchResult.spaces[0]&&a.searchResult.spaces[0].ads){var b=a.searchResult.spaces[0];if(b.ads.length>=1)return b.ads[0]}return null},validateRGBAColor:function(a){var b=a.replace(/\(|\)| /g,"").split(",");if(4!=b.length)return!1;for(var c=0;c<b.length;++c){var d=parseFloat(b[c]),e=3==c?1:255;if(d<0||d>e)return!1}return!0},buildKTarget:function(a){var b="wsj"+a.subscriber;return a.ctp&&(b+=" wsjctp"+a.ctp.toLowerCase()),a.navSource&&(b+=" wsjmod"+a.navSource),"undefined"!=typeof a.bucket&&(b+=" wsjgroup"+a.bucket),a.userExp&&(b+=" wsjux"+a.userExp.replace(/_| /g,"")),a.k&&(b+=" "+a.k),a.referrer&&(b+=" wsjref"+a.referrer),a.pwTag&&(b+=" wsjpwt"+a.pwTag),a.pwPlacement&&(b+=" wsjpwp"+a.pwPlacement),a.pwCampaign&&(b+=" wsjpwc"+a.pwCampaign),b},getHost:function(a){var b=document.referrer||"",c=b.replace(/^https?:\/\//,"").split("/")[0];return a.host&&(c=a.host),c},getMeta:function(){var a={},b=cX.library.parseHashArgs();return b.meta&&(a=JSON.parse(b.meta)),a}},cxdj=cxdj||cxCandyObj,fromRendering="undefined"!=typeof renderingTemplate,cX=cX||{};cX.callQueue=cX.callQueue||[],fromRendering||(!function(){try{var a=document.createElement("script");a.type="text/javascript",a.async="async",a.src="https:"==document.location.protocol?"https://scdn.cxense.com/cx.js":"http://cdn.cxense.com/cx.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}catch(c){}}(),function(){try{var a=document.createElement("script");a.type="text/javascript",a.async="sync",a.src="https:"==document.location.protocol?"https://s.wsj.net/static_html_files/md5.js":"http://s.wsj.net/static_html_files/md5.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}catch(c){}}(),initializeCxense());
